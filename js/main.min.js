"use strict";let freshIdeasObject={completed:[],achievements:{}};function saveFreshIdeasInStorage(){localStorage.setItem("freshIdeasObject",JSON.stringify(freshIdeasObject))}const chooseIdeasList=document.querySelector(".choose-ideas__row"),myIdeasList=document.querySelector(".slider__body"),myIdeasListWrapper=document.querySelector(".slider__wrapper");async function query(){for(let e=0;e<4;e++){let t=await fetch("https://www.boredapi.com/api/activity/",{method:"GET",mode:"cors"}),i=await t.json(),s=`<div class="choose-ideas__column idea__column" data-text="${i.activity}" data-title="${i.type}">\n                        <article class="choose-ideas__item idea__item">\n                           <header class="choose-ideas__header idea__header">\n                              <h5 class="choose-ideas__title idea__title title-h5">${i.type}</h5>\n                           </header>\n                           <p class="choose-ideas__text idea__text text">\n                           ${i.activity}\n                           </p>\n                           <button class="choose-ideas__button idea__button text focus-borderradius-50" title="add in my list" type="button">\n                              <svg class="idea__icon icon__plus" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                 <path d="M22 10.3196H11.6804V0H10.3196V10.3196H0V11.6804H10.3196V22H11.6804V11.6804H22V10.3196Z" fill="white"/>\n                              </svg>\n                              <svg class="idea__icon icon__mark" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                 <path d="M7.7214 22C7.33861 22.0006 6.96064 21.9077 6.61566 21.7284C6.27069 21.549 5.9676 21.2878 5.72899 20.9642L0.141761 13.4021C0.0241786 13.2109 -0.022724 12.9789 0.0103336 12.752C0.0433913 12.5252 0.154001 12.32 0.320277 12.1771C0.486554 12.0343 0.696383 11.964 0.908249 11.9804C1.12012 11.9968 1.31858 12.0985 1.46438 12.2655L7.05161 19.8184C7.13398 19.9346 7.24089 20.0278 7.36339 20.0902C7.48589 20.1525 7.62043 20.1823 7.75574 20.1769C7.89105 20.1715 8.0232 20.1311 8.14113 20.0592C8.25906 19.9873 8.35934 19.8859 8.43359 19.7634L20.4474 0.404457C20.5098 0.304549 20.5897 0.218895 20.6827 0.152388C20.7756 0.0858799 20.8798 0.0398205 20.9892 0.0168392C21.0987 -0.00614208 21.2112 -0.00559566 21.3205 0.0184481C21.4297 0.0424919 21.5335 0.089562 21.6259 0.15697C21.7183 0.224379 21.7975 0.310805 21.859 0.411316C21.9206 0.511827 21.9632 0.624453 21.9844 0.742764C22.0057 0.861075 22.0052 0.982754 21.9829 1.10085C21.9607 1.21895 21.9172 1.33116 21.8548 1.43107L9.84947 20.7809C9.6261 21.142 9.32678 21.4407 8.97604 21.6526C8.6253 21.8645 8.23312 21.9835 7.83162 22H7.7214Z" fill="white"/>\n                              </svg>\n                              <span class="idea__button-text idea__button-text-add">Add to my list</span>\n                              <span class="idea__button-text idea__button-text-completed">Completed</span>\n                           </button>\n                        </article>\n                     </div>`;0===e?chooseIdeasList.innerHTML=s:chooseIdeasList.innerHTML+=s}}query();const queryBtn=document.querySelector(".choose-ideas__get-new-ideas");function queryOnClick(){query()}function addIdeaToMyList(e){let t=e.target.closest(".idea__button");if(t){let e=t.closest(".idea__column");t.title="make idea complete",myIdeasList.prepend(e),removeHolderFromMyList(),disabledSliderBnts(),sliderCounter(),itemActive(),myIdeasList.removeAttribute("style"),sliderCurrentActiveItem=0,sliderBodyPosition=0,sliderCounter(),localStorage.setItem("myList-fi",myIdeasList.innerHTML)}}function removeHolderFromMyList(){myIdeasList.querySelector(".idea__column")&&myIdeasListWrapper.classList.remove("_empty")}function itemActive(){for(let e of myIdeasList.children)e.firstElementChild.classList.remove("_active");myIdeasList.children.length&&myIdeasList.children[0].firstElementChild.classList.add("_active")}queryBtn.addEventListener("click",queryOnClick),chooseIdeasList.addEventListener("click",addIdeaToMyList);const burgerBtn=document.querySelector(".burger-btn"),burgerMenu=document.querySelector(".header__menu");function closeMenu(e){e.target.closest(".menu__list-link")&&(burgerBtn.classList.remove("_active"),document.body.classList.remove("_lock"),burgerMenu.classList.remove("_active"))}burgerBtn.addEventListener("click",(e=>{burgerBtn.classList.toggle("_active"),document.body.classList.toggle("_lock"),burgerMenu.classList.toggle("_active")})),burgerMenu.addEventListener("click",closeMenu);const sliderBtns=document.querySelectorAll(".my-list__btn"),sliderBody=document.querySelector(".slider__body"),sliderWrapper=document.querySelector(".slider__wrapper");let sliderNumberOfSlidesToShow=3,sliderCurrentActiveItem=0,sliderBodyPosition=0;document.body.clientWidth<=1140&&(sliderNumberOfSlidesToShow=2),document.body.clientWidth<=780&&(sliderNumberOfSlidesToShow=1);const sliderColumns=sliderBody.querySelectorAll(".idea__column"),sliderColumnWidth=sliderColumns.length?sliderColumns[0].clientWidth:"",sliderItems=sliderBody.querySelectorAll(".idea__item"),sliderWrapperWidth=sliderWrapper.clientWidth,sliderBodyFullWidth=sliderColumnWidth*sliderColumns.length;function disabledSliderBnts(){for(let e of sliderBtns)myIdeasList.children.length<=1?e.disabled=!0:e.disabled=!1}function sliderCounter(){let e=document.querySelector(".slider__counter-current"),t=document.querySelector(".slider__counter-all");e.innerHTML=myIdeasList.children.length?sliderCurrentActiveItem+1:0,t.innerHTML=myIdeasList.children.length}sliderColumns.length&&sliderItems[0].classList.add("_active"),sliderBtns.forEach((e=>{e.addEventListener("click",(e=>{let t=e.target.closest(".my-list__btn").dataset.action;"previous"===t&&(sliderCurrentActiveItem===myIdeasList.children.length-1&&1!==sliderNumberOfSlidesToShow||sliderBodyPosition&&(sliderBodyPosition+=myIdeasList.children[0].clientWidth,sliderBody.style.left=sliderBodyPosition+"px"),sliderCurrentActiveItem>0&&sliderCurrentActiveItem--),"next"===t&&(0===sliderCurrentActiveItem&&1!==sliderNumberOfSlidesToShow||sliderBodyPosition>-(myIdeasList.children.length*myIdeasList.children[0].clientWidth-myIdeasList.children[0].clientWidth*sliderNumberOfSlidesToShow)&&(sliderBodyPosition-=myIdeasList.children[0].clientWidth,sliderBody.style.left=sliderBodyPosition+"px"),sliderCurrentActiveItem<myIdeasList.children.length-1&&sliderCurrentActiveItem++),sliderCounter();for(let e of myIdeasList.children)e.firstElementChild.classList.remove("_active");myIdeasList.children[sliderCurrentActiveItem].firstElementChild.classList.add("_active")}))}));const completedTable=document.querySelector(".completed-table tbody"),completedTableWrapper=document.querySelector(".completed__table-wrapper"),achievements=document.querySelector(".achievements__row");function completeTask(e){let t=e.target.closest(".idea__button");if(t){let e=t.closest(".idea__column"),i=e.dataset.title;if(achievements.querySelector(`.achievements__column[data-title="${i}"]`))freshIdeasObject.achievements[i]++,achievements.querySelector(`.achievements__column[data-title="${i}"] .achievement__counter`).innerHTML++;else{freshIdeasObject.achievements[i]=1;let e=`<div class="achievements__column" data-title="${i}">\n                                       <article class="achievements__item achievement">\n                                          <header class="achievement__header">\n                                             <h3 class="achievement__title title-h3">${i}</h3>\n                                          </header>\n                                          <p class="achievement__counter">${freshIdeasObject.achievements[i]}</p>\n                                       </article>\n                                    </div>`;achievements.innerHTML+=e}let s=e.dataset.text.split("");s.length=20;let l=new Date,r=("0"+l.getDate()).slice(-2),d=("0"+(l.getMonth()+1)).slice(-2),o=l.getFullYear(),n=l.getHours(),c=("0"+l.getMinutes()).slice(-2);freshIdeasObject.completed.push([s.join(""),i,r+"."+d+"."+o+" - "+n+":"+c]);let a=`<tr>\n                        <td>${freshIdeasObject.completed.length}</td>\n                        <td>${s.join("")+"..."}</td>\n                        <td class="completed-table-item__title">${i}</td>\n                        <td>${r+"."+d+"."+o+" - "+n+":"+c}</td>\n                     </tr>`;completedTable.innerHTML+=a,saveFreshIdeasInStorage(),e.remove(),addHolderForMyList(),removeAchievementsHolder(),removeCompletedHolder(),disabledSliderBnts(),sliderCounter(),itemActive(),myIdeasList.removeAttribute("style"),sliderCurrentActiveItem=0,sliderBodyPosition=0,sliderCounter(),localStorage.setItem("achievements-fi",achievements.innerHTML),localStorage.setItem("completed-fi",completedTable.innerHTML),localStorage.setItem("myList-fi",myIdeasList.innerHTML)}}function addHolderForMyList(){myIdeasList.querySelector(".idea__column")||myIdeasListWrapper.classList.add("_empty")}function removeAchievementsHolder(){achievements.querySelector(".achievements__column")&&achievements.classList.remove("_empty")}function removeCompletedHolder(){completedTable.querySelector("tr")&&completedTableWrapper.classList.remove("_empty")}myIdeasList.addEventListener("click",completeTask),myIdeasList.innerHTML=localStorage.getItem("myList-fi"),completedTable.innerHTML=localStorage.getItem("completed-fi");let achievementsFromLocalStorage=localStorage.getItem("achievements-fi");achievementsFromLocalStorage&&(achievements.innerHTML=achievementsFromLocalStorage);let freshIdeasObjectFromLocalStorage=localStorage.getItem("freshIdeasObject");freshIdeasObjectFromLocalStorage&&(freshIdeasObject=JSON.parse(freshIdeasObjectFromLocalStorage)),disabledSliderBnts(),sliderCounter(),removeHolderFromMyList(),removeAchievementsHolder(),removeCompletedHolder();
